<!DOCTYPE html>
<html lang="en-us" ng-app="myApp">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="favicon.ico" />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />

    <link href="css/default.css" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="http://cdn.static.runoob.com/libs/angular.js/1.4.6/angular.min.js"></script>
    
    <!--[if lt IE 9]>
      <script src="js/bootstrap/html5shiv.min.js"></script>
      <script src="js/bootstrap/respond.min.js"></script>
    <![endif]-->
</head>
<body ng-controller="FilesController">
    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle show pull-left" data-target="sidebar">
                    <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">Bootstrap</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="top1.html">top1.html</a></li>
                    <li><a href="top2.html">top2.html</a></li>
                    <li><a href="top3.html">top3.html</a></li>
                    <li><a href="https://github.com/shihao316558512/bootstrap" target="_blank"><i class="fa fa-download fa-fw"></i>&nbsp;原码下载</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                           aria-expanded="false"><i class="fa fa-user fa-fw"></i>&nbsp;小王&nbsp;<span class="caret"></span></a>
                        <ul class="dropdown-menu" role="menu">
                            <li><a href="top-right1.html">top-right1.html</a></li>
                            <li class="divider"></li>
                            <li><a href="top-right2.html">top-right2.html</a></li>
                            <li class="divider"></li>
                            <li><a href="top-right3.html"><i class="fa fa-sign-out fa-fw"></i>&nbsp;top-right3.html</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container-fluid all" >
        <div class="sidebar">
            <ul class="nav ">
                <li class="active"><a ng-click="doSomething('back.php?flag=1')" >Legislators</a></li>
                <li><a  >Bills</a></li>
                <li><a href="message.html">Committees</a></li>
                <li><a href="ui.html">Favorites</a></li>
            </ul>
        </div>
        <div class="maincontent" ng-hide="flag" class="jumbotron">
		<h2>Legislators</h2>
		<div class="thumbnail">
			<ul id="myTab" class="nav nav-tabs">
				<li class="active"><a href="#state" data-toggle="tab">
					By State</a>
				</li>
				<li><a href="#house" data-toggle="tab">House</a></li>
				<li><a href="#senate" data-toggle="tab">Senate</a></li>
				<li class="dropdown">
					<a href="#" id="myTabDrop1" class="dropdown-toggle" 
					   data-toggle="dropdown">Java <b class="caret"></b>
					</a>
					<ul class="dropdown-menu" role="menu" aria-labelledby="myTabDrop1">
						<li><a href="#jmeter" tabindex="-1" data-toggle="tab">
							jmeter</a>
						</li>
						<li><a href="#ejb" tabindex="-1" data-toggle="tab">
							ejb</a>
						</li>
					</ul>
				</li>
			</ul>
			<div id="myTabContent" class="tab-content">
				<div class="tab-pane fade in active" id="state">
					<div class="well">您好，我在 Well 中！</div>
					<table class="table table-bordered">
						<tr>
						    <th>index</th>
						    <th ng-repeat="(x,y) in items[0]">{{ x }}</th>
						</tr>
						<tr ng-repeat="x in items">
						    <td>{{ $index + 1 }}</td>
						    <td ng-bind="x.name"></td>
						    <td ng-bind="x.city"></td>
						    <td ng-bind="x.country"></td>
						</tr>
					</table>
					<nav>
						<ul class="pagination">
						    <li>
							<a ng-click="Previous()">
							    <span>上一页</span>
							</a>
						    </li>
						    <li ng-repeat="page in pageList" ng-class="{active: isActivePage(page)}" >
							<a ng-click="selectPage(page)" >{{ page }}</a>
						    </li>
						    <li>
							<a ng-click="Next()">
							    <span>下一页</span>
							</a>
						    </li>
						</ul>
					</nav>					

		



				</div>
				<div class="tab-pane fade" id="house">
					<p>iOS 是一个由苹果公司开发和发布的手机操作系统。最初是于 2007 年首次发布 iPhone、iPod Touch 和 Apple 
						TV。iOS 派生自 OS X，它们共享 Darwin 基础。OS X 操作系统是用在苹果电脑上，iOS 是苹果的移动版本。</p>
				</div>
				<div class="tab-pane fade" id="senate">
					<p>jMeter 是一款开源的测试软件。它是 100% 纯 Java 应用程序，用于负载和性能测试。</p>
				</div>
			</div>


		</div>	
    </div>
<script>

    (function() {

        var app = angular.module('myApp', []);
        app.controller('FilesController', function ($scope, $http){
            $scope.files = [];
            $scope.flag = false;
            //$scope.title = new array(); 
            $scope.doSomething = function(requestString){
            $http.get(requestString).then(function (response) {
            //数据源
            $scope.data = response.data.records;
            //分页总数
            $scope.pageSize = 5;
            $scope.pages = Math.ceil($scope.data.length / $scope.pageSize); //分页数
            $scope.newPages = $scope.pages > 5 ? 5 : $scope.pages;
            $scope.pageList = [];
            $scope.selPage = 1;
            //设置表格数据源(分页)
            $scope.setData = function () {
                $scope.items = $scope.data.slice(($scope.pageSize * ($scope.selPage - 1)), ($scope.selPage * $scope.pageSize));//通过当前页数筛选出表格当前显示数据
            }
            $scope.items = $scope.data.slice(0, $scope.pageSize);
            
            //分页要repeat的数组
            for (var i = 0; i < $scope.newPages; i++) {
                $scope.pageList.push(i + 1);
            }
            //打印当前选中页索引
            $scope.selectPage = function (page) {
                //不能小于1大于最大
                if (page < 1 || page > $scope.pages) return;
                //最多显示分页数5
                if (page > 2) {
                    //因为只显示5个页数，大于2页开始分页转换
                    var newpageList = [];
                    for (var i = (page - 3) ; i < ((page + 2) > $scope.pages ? $scope.pages : (page + 2)) ; i++) {
                        newpageList.push(i + 1);
                    }
                    $scope.pageList = newpageList;
                }
                $scope.selPage = page;
                $scope.setData();
                $scope.isActivePage(page);
                console.log("选择的页：" + page);
            };
            //设置当前选中页样式
            $scope.isActivePage = function (page) {
                return $scope.selPage == page;
            };
            //上一页
            $scope.Previous = function () {
                $scope.selectPage($scope.selPage - 1);
            }
            //下一页
            $scope.Next = function () {
                $scope.selectPage($scope.selPage + 1);
            };
        });
            }

            $scope.doSomething('back.php');
            /*start billing*/
            
        });          
    })();

</script>
</body>
</html>
